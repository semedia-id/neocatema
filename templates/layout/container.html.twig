{% set html %}
    {% for segment in segments %}
        {% include 'layout/' ~ segment.type ~ '.html.twig' with { 'segments': segment.children } %}
    {% endfor %}
{% endset %}

{% if segment.attributes.sticky or html|trim %}
    {% set attr_id = segment.attributes.id ?: 'g-' ~ segment.id %}
    {% set boxed = segment.attributes.boxed %}

    {% if boxed is null %}
        {% set boxed = boxed|trim == '' ? gantry.config.page.body.layout.sections : boxed %}
    {% endif %}
	
	{% if boxed > 0 %}
		{% set box_class = "g-container layout-" ~boxed %}
	{% else %}
		{% set box_class = "g-container" %}
	{% endif %}
	
    {% set class = 'g-wrapper' ~ (segment.attributes.class ? ' ' ~ segment.attributes.class) %}
    {% set attr_extra = segment.attributes.extra|attribute_array %}

    {% set html %}
        <div class="{{box_class|raw}}">{{ html|raw }}</div>
    {% endset %}

    {% set html %}
    <section id="{{ attr_id }}" class="{{ class }}" {{- attr_extra|raw }}>
        {{ html|raw }}
    </section>
    {% endset %}

    {{ html|raw }}

{% endif %}
